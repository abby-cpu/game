<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WarpZoneX - å¤ªç©ºå†’é™©</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #000;
            color: #fff;
            font-family: 'Courier New', monospace;
            overflow: hidden;
        }
        
        #game-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            background-color: #000;
            overflow: hidden;
        }
        
        #stars {
            position: absolute;
            width: 100%;
            height: 100%;
        }
        
        #player {
            position: absolute;
            width: 50px;
            height: 50px;
            background-color: #4fc3f7;
            border-radius: 50%;
            box-shadow: 0 0 10px #4fc3f7, 0 0 20px #4fc3f7;
            transition: transform 0.1s;
        }
        
        .enemy {
            position: absolute;
            width: 30px;
            height: 30px;
            background-color: #f44336;
            border-radius: 50%;
            box-shadow: 0 0 10px #f44336, 0 0 20px #f44336;
        }
        
        .laser {
            position: absolute;
            width: 5px;
            height: 15px;
            background-color: #76ff03;
            box-shadow: 0 0 5px #76ff03, 0 0 10px #76ff03;
        }
        
        .explosion {
            position: absolute;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: rgba(255, 165, 0, 0.8);
            box-shadow: 0 0 20px rgba(255, 165, 0, 0.8), 0 0 40px rgba(255, 165, 0, 0.5);
            animation: explode 0.5s forwards;
        }
        
        @keyframes explode {
            0% {
                transform: scale(0.1);
                opacity: 1;
            }
            100% {
                transform: scale(2);
                opacity: 0;
            }
        }
        
        .star {
            position: absolute;
            background-color: #fff;
            border-radius: 50%;
        }
        
        #score {
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 24px;
            z-index: 100;
        }
        
        #health {
            position: absolute;
            top: 50px;
            left: 20px;
            font-size: 24px;
            z-index: 100;
        }
        
        #level {
            position: absolute;
            top: 80px;
            left: 20px;
            font-size: 24px;
            z-index: 100;
        }
        
        #game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 48px;
            text-align: center;
            display: none;
            z-index: 200;
        }
        
        #restart {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 24px;
            background-color: #4fc3f7;
            color: #000;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        
        #power-up {
            position: absolute;
            width: 30px;
            height: 30px;
            background-color: #ffeb3b;
            border-radius: 50%;
            box-shadow: 0 0 10px #ffeb3b, 0 0 20px #ffeb3b;
            animation: pulse 1s infinite alternate;
        }
        
        @keyframes pulse {
            0% {
                transform: scale(1);
                box-shadow: 0 0 10px #ffeb3b, 0 0 20px #ffeb3b;
            }
            100% {
                transform: scale(1.2);
                box-shadow: 0 0 15px #ffeb3b, 0 0 30px #ffeb3b;
            }
        }
        
        #controls {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: none;
            z-index: 100;
        }
        
        .control-btn {
            width: 60px;
            height: 60px;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            margin: 0 10px;
            display: inline-flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            user-select: none;
        }
        
        @media (max-width: 768px) {
            #controls {
                display: block;
            }
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="stars"></div>
        <div id="player"></div>
        <div id="score">åˆ†æ•°: 0</div>
        <div id="health">ç”Ÿå‘½: 100</div>
        <div id="level">ç­‰çº§: 1</div>
        <div id="game-over">
            æ¸¸æˆç»“æŸ<br>
            æœ€ç»ˆåˆ†æ•°: <span id="final-score">0</span><br>
            <button id="restart">é‡æ–°å¼€å§‹</button>
        </div>
        <div id="controls">
            <div class="control-btn" id="left-btn">â†</div>
            <div class="control-btn" id="fire-btn">ğŸ”¥</div>
            <div class="control-btn" id="right-btn">â†’</div>
        </div>
    </div>

    <script>
        // æ¸¸æˆå˜é‡
        const gameContainer = document.getElementById('game-container');
        const player = document.getElementById('player');
        const scoreElement = document.getElementById('score');
        const healthElement = document.getElementById('health');
        const levelElement = document.getElementById('level');
        const gameOverElement = document.getElementById('game-over');
        const finalScoreElement = document.getElementById('final-score');
        const restartButton = document.getElementById('restart');
        const starsContainer = document.getElementById('stars');
        
        // ç§»åŠ¨æ§åˆ¶æŒ‰é’®
        const leftBtn = document.getElementById('left-btn');
        const rightBtn = document.getElementById('right-btn');
        const fireBtn = document.getElementById('fire-btn');
        
        let score = 0;
        let health = 100;
        let level = 1;
        let gameRunning = true;
        
        let playerX = window.innerWidth / 2 - 25;
        let playerY = window.innerHeight - 100;
        
        let enemies = [];
        let lasers = [];
        let powerUps = [];
        
        let keys = {};
        let lastShot = 0;
        let shootCooldown = 300; // å°„å‡»å†·å´æ—¶é—´(æ¯«ç§’)
        
        let enemySpeed = 2;
        let enemySpawnRate = 1500; // æ•Œäººç”Ÿæˆé€Ÿç‡(æ¯«ç§’)
        let powerUpChance = 0.1; // èƒ½é‡é“å…·ç”Ÿæˆæ¦‚ç‡
        
        let specialWeapon = false;
        let specialWeaponTimer = null;
        
        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame() {
            // è®¾ç½®ç©å®¶åˆå§‹ä½ç½®
            player.style.left = `${playerX}px`;
            player.style.top = `${playerY}px`;
            
            // åˆ›å»ºæ˜Ÿæ˜ŸèƒŒæ™¯
            createStars();
            
            // å¼€å§‹æ¸¸æˆå¾ªç¯
            gameLoop();
            
            // å®šæœŸç”Ÿæˆæ•Œäºº
            enemySpawner = setInterval(spawnEnemy, enemySpawnRate);
        }
        
        // åˆ›å»ºæ˜Ÿæ˜ŸèƒŒæ™¯
        function createStars() {
            for (let i = 0; i < 200; i++) {
                const star = document.createElement('div');
                star.classList.add('star');
                
                const size = Math.random() * 3;
                const x = Math.random() * window.innerWidth;
                const y = Math.random() * window.innerHeight;
                const speed = 0.1 + Math.random() * 0.3;
                
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                star.style.left = `${x}px`;
                star.style.top = `${y}px`;
                star.dataset.speed = speed;
                
                starsContainer.appendChild(star);
            }
        }
        
        // ç”Ÿæˆæ•Œäºº
        function spawnEnemy() {
            if (!gameRunning) return;
            
            const enemy = document.createElement('div');
            enemy.classList.add('enemy');
            
            const x = Math.random() * (window.innerWidth - 30);
            const y = -30;
            
            enemy.style.left = `${x}px`;
            enemy.style.top = `${y}px`;
            
            gameContainer.appendChild(enemy);
            enemies.push({
                element: enemy,
                x: x,
                y: y,
                speed: enemySpeed + Math.random() * 2
            });
            
            // éšæœºç”Ÿæˆèƒ½é‡é“å…·
            if (Math.random() < powerUpChance) {
                spawnPowerUp();
            }
        }
        
        // ç”Ÿæˆèƒ½é‡é“å…·
        function spawnPowerUp() {
            const powerUp = document.createElement('div');
            powerUp.id = 'power-up';
            
            const x = Math.random() * (window.innerWidth - 30);
            const y = -30;
            
            powerUp.style.left = `${x}px`;
            powerUp.style.top = `${y}px`;
            
            gameContainer.appendChild(powerUp);
            powerUps.push({
                element: powerUp,
                x: x,
                y: y,
                speed: 1 + Math.random()
            });
        }
        
        // å°„å‡»æ¿€å…‰
        function shoot() {
            if (!gameRunning) return;
            
            const now = Date.now();
            if (now - lastShot < shootCooldown) return;
            
            lastShot = now;
            
            if (specialWeapon) {
                // ç‰¹æ®Šæ­¦å™¨: ä¸‰è¿å‘
                for (let i = -1; i <= 1; i++) {
                    const laser = document.createElement('div');
                    laser.classList.add('laser');
                    
                    const x = playerX + 22.5 + (i * 10);
                    const y = playerY;
                    
                    laser.style.left = `${x}px`;
                    laser.style.top = `${y}px`;
                    
                    gameContainer.appendChild(laser);
                    lasers.push({
                        element: laser,
                        x: x,
                        y: y,
                        speed: 7
                    });
                }
            } else {
                // æ™®é€šæ­¦å™¨: å•å‘
                const laser = document.createElement('div');
                laser.classList.add('laser');
                
                const x = playerX + 22.5;
                const y = playerY;
                
                laser.style.left = `${x}px`;
                laser.style.top = `${y}px`;
                
                gameContainer.appendChild(laser);
                lasers.push({
                    element: laser,
                    x: x,
                    y: y,
                    speed: 7
                });
            }
        }
        
        // æ£€æµ‹ç¢°æ’
        function checkCollisions() {
            // æ£€æµ‹æ¿€å…‰ä¸æ•Œäººçš„ç¢°æ’
            for (let i = lasers.length - 1; i >= 0; i--) {
                const laser = lasers[i];
                
                for (let j = enemies.length - 1; j >= 0; j--) {
                    const enemy = enemies[j];
                    
                    if (
                        laser.x < enemy.x + 30 &&
                        laser.x + 5 > enemy.x &&
                        laser.y < enemy.y + 30 &&
                        laser.y + 15 > enemy.y
                    ) {
                        // åˆ›å»ºçˆ†ç‚¸æ•ˆæœ
                        createExplosion(enemy.x, enemy.y);
                        
                        // ç§»é™¤æ•Œäººå’Œæ¿€å…‰
                        gameContainer.removeChild(enemy.element);
                        enemies.splice(j, 1);
                        
                        gameContainer.removeChild(laser.element);
                        lasers.splice(i, 1);
                        
                        // å¢åŠ åˆ†æ•°
                        score += 10;
                        scoreElement.textContent = `åˆ†æ•°: ${score}`;
                        
                        // æ£€æŸ¥å‡çº§
                        checkLevelUp();
                        
                        break;
                    }
                }
            }
            
            // æ£€æµ‹ç©å®¶ä¸æ•Œäººçš„ç¢°æ’
            for (let i = enemies.length - 1; i >= 0; i--) {
                const enemy = enemies[i];
                
                if (
                    playerX < enemy.x + 30 &&
                    playerX + 50 > enemy.x &&
                    playerY < enemy.y + 30 &&
                    playerY + 50 > enemy.y
                ) {
                    // åˆ›å»ºçˆ†ç‚¸æ•ˆæœ
                    createExplosion(enemy.x, enemy.y);
                    
                    // ç§»é™¤æ•Œäºº
                    gameContainer.removeChild(enemy.element);
                    enemies.splice(i, 1);
                    
                    // å‡å°‘ç”Ÿå‘½å€¼
                    health -= 10;
                    healthElement.textContent = `ç”Ÿå‘½: ${health}`;
                    
                    // æ£€æŸ¥æ¸¸æˆç»“æŸ
                    if (health <= 0) {
                        endGame();
                    }
                }
            }
            
            // æ£€æµ‹ç©å®¶ä¸èƒ½é‡é“å…·çš„ç¢°æ’
            for (let i = powerUps.length - 1; i >= 0; i--) {
                const powerUp = powerUps[i];
                
                if (
                    playerX < powerUp.x + 30 &&
                    playerX + 50 > powerUp.x &&
                    playerY < powerUp.y + 30 &&
                    playerY + 50 > powerUp.y
                ) {
                    // ç§»é™¤èƒ½é‡é“å…·
                    gameContainer.removeChild(powerUp.element);
                    powerUps.splice(i, 1);
                    
                    // æ¿€æ´»ç‰¹æ®Šæ­¦å™¨
                    activateSpecialWeapon();
                }
            }
        }
        
        // åˆ›å»ºçˆ†ç‚¸æ•ˆæœ
        function createExplosion(x, y) {
            const explosion = document.createElement('div');
            explosion.classList.add('explosion');
            
            explosion.style.left = `${x}px`;
            explosion.style.top = `${y}px`;
            
            gameContainer.appendChild(explosion);
            
            // çˆ†ç‚¸åŠ¨ç”»ç»“æŸåç§»é™¤å…ƒç´ 
            setTimeout(() => {
                if (explosion.parentNode === gameContainer) {
                    gameContainer.removeChild(explosion);
                }
            }, 500);
        }
        
        // æ¿€æ´»ç‰¹æ®Šæ­¦å™¨
        function activateSpecialWeapon() {
            specialWeapon = true;
            player.style.boxShadow = "0 0 10px #ffeb3b, 0 0 20px #ffeb3b";
            
            // æ¸…é™¤ä¹‹å‰çš„è®¡æ—¶å™¨
            if (specialWeaponTimer) {
                clearTimeout(specialWeaponTimer);
            }
            
            // 10ç§’åæ¢å¤æ™®é€šæ­¦å™¨
            specialWeaponTimer = setTimeout(() => {
                specialWeapon = false;
                player.style.boxShadow = "0 0 10px #4fc3f7, 0 0 20px #4fc3f7";
            }, 10000);
        }
        
        // æ£€æŸ¥å‡çº§
        function checkLevelUp() {
            const newLevel = Math.floor(score / 100) + 1;
            
            if (newLevel > level) {
                level = newLevel;
                levelElement.textContent = `ç­‰çº§: ${level}`;
                
                // å¢åŠ éš¾åº¦
                enemySpeed += 0.5;
                enemySpawnRate = Math.max(300, enemySpawnRate - 100);
                
                // æ›´æ–°æ•Œäººç”Ÿæˆé€Ÿç‡
                clearInterval(enemySpawner);
                enemySpawner = setInterval(spawnEnemy, enemySpawnRate);
            }
        }
        
        // æ¸¸æˆç»“æŸ
        function endGame() {
            gameRunning = false;
            clearInterval(enemySpawner);
            
            finalScoreElement.textContent = score;
            gameOverElement.style.display = 'block';
        }
        
        // é‡æ–°å¼€å§‹æ¸¸æˆ
        function restartGame() {
            // æ¸…é™¤æ‰€æœ‰æ•Œäººå’Œæ¿€å…‰
            enemies.forEach(enemy => {
                if (enemy.element.parentNode === gameContainer) {
                    gameContainer.removeChild(enemy.element);
                }
            });
            
            lasers.forEach(laser => {
                if (laser.element.parentNode === gameContainer) {
                    gameContainer.removeChild(laser.element);
                }
            });
            
            powerUps.forEach(powerUp => {
                if (powerUp.element.parentNode === gameContainer) {
                    gameContainer.removeChild(powerUp.element);
                }
            });
            
            // é‡ç½®æ¸¸æˆå˜é‡
            enemies = [];
            lasers = [];
            powerUps = [];
            score = 0;
            health = 100;
            level = 1;
            enemySpeed = 2;
            enemySpawnRate = 1500;
            specialWeapon = false;
            
            // æ›´æ–°æ˜¾ç¤º
            scoreElement.textContent = `åˆ†æ•°: ${score}`;
            healthElement.textContent = `ç”Ÿå‘½: ${health}`;
            levelElement.textContent = `ç­‰çº§: ${level}`;
            
            // é‡ç½®ç©å®¶ä½ç½®
            playerX = window.innerWidth / 2 - 25;
            playerY = window.innerHeight - 100;
            player.style.left = `${playerX}px`;
            player.style.top = `${playerY}px`;
            player.style.boxShadow = "0 0 10px #4fc3f7, 0 0 20px #4fc3f7";
            
            // éšè—æ¸¸æˆç»“æŸç”»é¢
            gameOverElement.style.display = 'none';
            
            // é‡æ–°å¼€å§‹æ¸¸æˆ
            gameRunning = true;
            enemySpawner = setInterval(spawnEnemy, enemySpawnRate);
        }
        
        // æ¸¸æˆä¸»å¾ªç¯
        function gameLoop() {
            if (gameRunning) {
                // æ›´æ–°ç©å®¶ä½ç½®
                if (keys['ArrowLeft'] || keys['a']) {
                    playerX = Math.max(0, playerX - 5);
                }
                if (keys['ArrowRight'] || keys['d']) {
                    playerX = Math.min(window.innerWidth - 50, playerX + 5);
                }
                if (keys[' '] || keys['w'] || keys['ArrowUp']) {
                    shoot();
                }
                
                player.style.left = `${playerX}px`;
                
                // æ›´æ–°æ¿€å…‰ä½ç½®
                for (let i = lasers.length - 1; i >= 0; i--) {
                    const laser = lasers[i];
                    laser.y -= laser.speed;
                    laser.element.style.top = `${laser.y}px`;
                    
                    // ç§»é™¤è¶…å‡ºå±å¹•çš„æ¿€å…‰
                    if (laser.y < -15) {
                        gameContainer.removeChild(laser.element);
                        lasers.splice(i, 1);
                    }
                }
                
                // æ›´æ–°æ•Œäººä½ç½®
                for (let i = enemies.length - 1; i >= 0; i--) {
                    const enemy = enemies[i];
                    enemy.y += enemy.speed;
                    enemy.element.style.top = `${enemy.y}px`;
                    
                    // ç§»é™¤è¶…å‡ºå±å¹•çš„æ•Œäºº
                    if (enemy.y > window.innerHeight) {
                        gameContainer.removeChild(enemy.element);
                        enemies.splice(i, 1);
                    }
                }
                
                // æ›´æ–°èƒ½é‡é“å…·ä½ç½®
                for (let i = powerUps.length - 1; i >= 0; i--) {
                    const powerUp = powerUps[i];
                    powerUp.y += powerUp.speed;
                    powerUp.element.style.top = `${powerUp.y}px`;
                    
                    // ç§»é™¤è¶…å‡ºå±å¹•çš„èƒ½é‡é“å…·
                    if (powerUp.y > window.innerHeight) {
                        gameContainer.removeChild(powerUp.element);
                        powerUps.splice(i, 1);
                    }
                }
                
                // æ›´æ–°æ˜Ÿæ˜Ÿä½ç½® (è§†å·®æ•ˆæœ)
                const stars = document.querySelectorAll('.star');
                stars.forEach(star => {
                    const y = parseFloat(star.style.top);
                    const speed = parseFloat(star.dataset.speed);
                    
                    let newY = y + speed;
                    if (newY > window.innerHeight) {
                        newY = 0;
                    }
                    
                    star.style.top = `${newY}px`;
                });
                
                // æ£€æµ‹ç¢°æ’
                checkCollisions();
            }
            
            // ç»§ç»­æ¸¸æˆå¾ªç¯
            requestAnimationFrame(gameLoop);
        }
        
        // é”®ç›˜äº‹ä»¶ç›‘å¬
        document.addEventListener('keydown', (e) => {
            keys[e.key] = true;
        });
        
        document.addEventListener('keyup', (e) => {
            keys[e.key] = false;
        });
        
        // è§¦æ‘¸æ§åˆ¶
        let leftPressed = false;
        let rightPressed = false;
        
        leftBtn.addEventListener('touchstart', () => {
            leftPressed = true;
            keys['ArrowLeft'] = true;
        });
        
        leftBtn.addEventListener('touchend', () => {
            leftPressed = false;
            keys['ArrowLeft'] = false;
        });
        
        rightBtn.addEventListener('touchstart', () => {
            rightPressed = true;
            keys['ArrowRight'] = true;
        });
        
        rightBtn.addEventListener('touchend', () => {
            rightPressed = false;
            keys['ArrowRight'] = false;
        });
        
        fireBtn.addEventListener('touchstart', () => {
            keys[' '] = true;
        });
        
        fireBtn.addEventListener('touchend', () => {
            keys[' '] = false;
        });
        
        // é‡æ–°å¼€å§‹æŒ‰é’®
        restartButton.addEventListener('click', restartGame);
        
        // çª—å£å¤§å°æ”¹å˜æ—¶é‡æ–°è°ƒæ•´
        window.addEventListener('resize', () => {
            playerX = Math.min(window.innerWidth - 50, playerX);
            playerY = window.innerHeight - 100;
            player.style.left = `${playerX}px`;
            player.style.top = `${playerY}px`;
        });
        
        // å¼€å§‹æ¸¸æˆ
        initGame();
    </script>
</body>
</html>
